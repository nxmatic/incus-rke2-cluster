apiVersion: config.porch.kpt.dev/v1alpha1
kind: Repository
metadata: # kpt-merge: porch-system/${cluster-name}-catalog
  name: ${cluster-name}-catalog # kpt-set: ${cluster-name}-catalog
  namespace: porch-system
  annotations:
    internal.kpt.dev/upstream-identifier: 'config.porch.kpt.dev|Repository|porch-system|${cluster-name}-catalog'
spec:
  description: Catalog of curated kpt packages tracked in incus-rke2-cluster
  type: git
  git:
    repo: /var/lib/git/nxmatic/incus-rke2-cluster.git # kpt-set: ${cluster-repo}.git
    branch: main # kpt-set: ${cluster-branch}
    directory: kpt/catalog # kpt-set: ${cluster-directory}
    secretRef:
      name: github-token # kpt-set: ${github-secret}
  deployment: true
---
apiVersion: config.porch.kpt.dev/v1alpha1
kind: Repository
metadata: # kpt-merge: porch-system/${cluster-name}-state
  name: ${cluster-name}-state # kpt-set: ${cluster-name}-state
  namespace: porch-system
  annotations:
    internal.kpt.dev/upstream-identifier: 'config.porch.kpt.dev|Repository|porch-system|${cluster-name}-state'
spec:
  description: Rendered Porch package state for bioskop cluster
  type: git
  git:
    repo: /var/lib/git/nxmatic/incus-rke2-cluster.git # kpt-set: ${cluster-state-repo}.git
    branch: main # kpt-set: ${cluster-state-branch}
    directory: kpt/fleet/bioskop # kpt-set: ${cluster-state-directory}/${cluster-name}
    createBranch: true
    secretRef:
      name: github-token # kpt-set: ${github-secret}
  deployment: true
