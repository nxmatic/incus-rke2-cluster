---
apiVersion: config.porch.kpt.dev/v1alpha1
kind: PackageVariant
metadata:
  annotations:
    internal.kpt.dev/upstream-identifier: config.porch.kpt.dev|PackageVariant|porch-system|runtime-flox
    kpt.dev/package-layer: gitops
    kpt.dev/package-name: porch-resources
  name: runtime-flox
  namespace: porch-system
spec:
  adoptionPolicy: adoptNone
  deletionPolicy: delete
  downstream:
    package: runtime/flox-containerd-shim
    repo: sample-state
  labels:
    cluster-name: sample
    nxmatic.dev/app: flox-containerd-shim
    nxmatic.dev/component: runtime
  packageContext:
    data:
      cluster-env: sample
      cluster-name: sample
  pipeline:
    mutators:
      - configMap:
          apk-max-retries: "5"
          containerd-address: /run/k3s/containerd/containerd.sock
          containerd-config-file: /var/lib/rancher/rke2/agent/etc/containerd/config.toml
          flox-namespace: flox
          node-label-key: flox.dev/enabled
          node-label-value: "true"
          runtime-class-name: flox
        image: ghcr.io/kptdev/krm-functions-catalog/apply-setters:v0.2
  upstream:
    package: runtime/flox-containerd-shim
    repo: sample-catalog
