apiVersion: config.porch.kpt.dev/v1alpha1
kind: Repository
metadata: # kpt-merge: porch-system/${cluster-name}-catalog
  name: ${cluster-name}-catalog # kpt-set: ${cluster-name}-catalog
  namespace: porch-system
  annotations:
    internal.kpt.dev/upstream-identifier: 'config.porch.kpt.dev|Repository|porch-system|${cluster-name}-catalog'
spec:
  description: Catalog of curated kpt packages tracked in incus-rke2-cluster
  type: git
  git:
    repo: https://github.com/nxmatic/incus-rke2-cluster.git
    branch: main
    directory: catalog
    secretRef: ${github-secret} # kpt-set: ${github-secret}
  deployment: true
---
apiVersion: config.porch.kpt.dev/v1alpha1
kind: Repository
metadata: # kpt-merge: porch-system/cluster-name-state
  name: cluster-name-state # kpt-set: ${cluster-name}-state
  namespace: porch-system
  annotations:
    internal.kpt.dev/upstream-identifier: 'config.porch.kpt.dev|Repository|porch-system|cluster-name-state'
spec:
  description: Rendered Porch package state for cluster-name cluster # kpt-set: Rendered Porch package state for ${cluster-name} cluster
  type: git
  git:
    repo: https://github.com/nxmatic/incus-rke2-cluster.git
    branch: main
    directory: rke2-subtree/cluster-name/catalog # kpt-set: rke2-subtree/${cluster-name}/catalog
    createBranch: true
    secretRef: ${github-secret} # kpt-set: ${github-secret}
  deployment: true
