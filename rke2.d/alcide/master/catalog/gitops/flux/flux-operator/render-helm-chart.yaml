apiVersion: experimental.helm.sh/v1alpha1
kind: RenderHelmChart
metadata: # kpt-merge: /flux-operator
  name: flux-operator
  annotations:
    config.kubernetes.io/local-config: "true"
    internal.kpt.dev/upstream-identifier: 'experimental.helm.sh|RenderHelmChart|default|flux-operator'
helmCharts:
  - chartArgs:
      name: ${chart-name} # kpt-set: ${chart-name}
      version: ${chart-version} # kpt-set: ${chart-version}
      repo: ${helm-repo} # kpt-set: ${helm-repo}
    templateOptions:
      releaseName: ${release-name} # kpt-set: ${release-name}
      namespace: ${target-namespace} # kpt-set: ${target-namespace}
      includeCRDs: true
      skipTests: true
      valuesInline:
        installCRDs: true
        logLevel: info
        priorityClassName: system-cluster-critical
        serviceMonitor:
          create: false
          interval: 60s
          scrapeTimeout: 30s
