apiVersion: fn.kpt.dev/v1alpha1
kind: RenderHelmChart
metadata: # kpt-merge: /kdns
  name: kdns
  annotations:
    config.kubernetes.io/local-config: "true"
    config.kubernetes.io/function: |
      container:
        network: true
        image: ghcr.io/kptdev/krm-functions-catalog/render-helm-chart:v0
    internal.kpt.dev/upstream-identifier: 'fn.kpt.dev|RenderHelmChart|default|kdns'
helmCharts:
  - chartArgs:
      name: kdns # kpt-set: ${chart-name}
      version: 0.2.3 # kpt-set: ${chart-version}
      repo: oci://ghcr.io/lab42/charts # kpt-set: ${helm-repo}
    templateOptions:
      releaseName: kdns # kpt-set: ${release-name}
      namespace: kdns-system
      includeCRDs: true
      skipTests: true
      values:
        valuesInline:
          image:
            tag: "v0.2.9"
          hostNetwork: true
          serviceAccount:
            create: true
            name: kdns # kpt-set: ${serviceaccount-name}
          tolerations:
            - operator: Exists