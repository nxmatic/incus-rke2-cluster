apiVersion: helm.cattle.io/v1
kind: HelmChart
metadata:
  namespace: kube-system
  name: tailscale-operator
spec:
  repo: https://pkgs.tailscale.com/helmcharts
  chart: tailscale-operator
  version: 1.82.0 # kpt-set: ${tailscale-version}
  targetNamespace: tailscale-system # kpt-set: ${tailscale-namespace}
  createNamespace: true
  valuesContent: |-
    oauth:
      clientId: kT715erNJB21CNTRL # sops:encrypted
      clientSecret: tskey-client-kT715erNJB21CNTRL-BQPzAaha7Keq7CRE3NkXKezuo7yJCTfqE # sops:encrypted
    operatorConfig:
      hostname: "bioskop-cluster-tailscale-operator" # kpt-set: ${cluster-name}-tailscale-operator
      debug: true
